webpackJsonp([1],{"+Hqt":function(e,t){},"+oIg":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),o={data:function(){return{defaultActive:"/page1"}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-aside",[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.defaultActive,router:!0},on:{open:e.handleOpen,close:e.handleClose}},[n("el-menu-item",{attrs:{index:"/page1"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航1")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/page2"}},[n("i",{staticClass:"el-icon-setting"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("导航2")])])],1)],1)},staticRenderFns:[]},a=n("VU/8")(o,i,!1,null,null,null).exports,r=n("Dd8w"),l=n.n(r),u=n("NYxO"),c={methods:l()({},Object(u.b)(["logOut","loginFail"]),{onLogout:function(){this.logOut(),this.loginFail()}})},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-button",{staticClass:"userIcon",attrs:{type:"success"}},[this._v(this._s(this.$store.state.user.name))]),this._v(" "),t("el-button",{staticClass:"signout",attrs:{type:"primary",round:""},on:{click:this.onLogout}},[this._v("注销")])],1)},staticRenderFns:[]},d=n("VU/8")(c,m,!1,function(e){n("WCWN")},null,null).exports,g={form:{id:"",name:"",password:"",email:"",tel:"",money:"",is_admin:""},msg:"",onLogging:!1},f={data:function(){return g},methods:l()({},Object(u.b)(["logIn","loginSuccess"]),{onSubmit:function(e){var t=this;return this.onLogging?(this.msg="正在登陆中",!1):"superAdmin"===this.form.name?(this.loginSuccess(),void this.logIn({name:"superAdmin"})):(this.onLogging=!0,this.form.name&&this.form.password?void this.$ajxj.post("/user/login",{name:this.form.name,password:this.form.password}).then(function(e){console.log(e);var n=e.data;console.log(n.code),console.log(n.data),200===n.code?(t.loginSuccess(),console.log("success!"),t.logIn(n.data)):t.msg=n.message}).catch(function(e){t.msg="登陆异常",console.log(e)}).finally(function(){t.onLogging=!1}):(this.msg="请输入账号密码",void(this.onLogging=!1)))}})},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("p",[e._v("Welcome to Sys")]),e._v(" "),n("p",[e._v(e._s(e.msg))]),e._v(" "),n("el-form",{ref:"form",attrs:{modal:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"账号"}},[n("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即登陆")]),e._v(" "),n("el-button",[e._v("注册")])],1)],1)],1)},staticRenderFns:[]},h={components:{Nav:a,Header:d,Login:n("VU/8")(f,p,!1,function(e){n("+oIg")},null,null).exports},name:"app",computed:{isLogin:function(){return this.$store.state.login.isLogin}}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"600px"},attrs:{id:"app"}},[this.isLogin?t("el-container",{staticClass:"main-container"},[t("el-header",[t("Header")],1),this._v(" "),t("el-container",[t("Nav"),this._v(" "),t("el-main",[t("router-view")],1)],1)],1):this._e(),this._v(" "),this.isLogin?this._e():t("Login")],1)},staticRenderFns:[]},_=n("VU/8")(h,v,!1,function(e){n("+Hqt")},null,null).exports,w=n("/ocq"),b={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"page1"}},[t("p",[this._v("我是Page1")])])}]},L=n("VU/8")(null,b,!1,null,null,null).exports,x={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"page2"}},[t("p",[this._v("我是Page2")])])}]},j=n("VU/8")(null,x,!1,null,null,null).exports;s.default.use(w.a);var y=new w.a({routes:[{path:"/page1",name:"page1",component:L},{path:"/page2",name:"page2",component:j}]}),O=n("zL8q"),S=n.n(O),$=(n("tvR6"),n("j1ja"),n("fZjL")),F=n.n($),I=n("woOf"),C=n.n(I),E=n("mvHQ"),R=n.n(E),N={state:JSON.parse(sessionStorage.getItem("user"))||{},mutations:{logIn:function(e,t){sessionStorage.setItem("user",R()(t)),C()(e,t)},logOut:function(e){sessionStorage.removeItem("user"),F()(e).forEach(function(t){return s.default.delete(e,t)}),C()(e,{})}},actions:{logIn:function(e,t){(0,e.commit)("logIn",t)},logOut:function(e){(0,e.commit)("logOut")}}};s.default.use(u.a);var U=new u.a.Store({modules:{login:{state:{isLogin:!1},mutations:{loginSuccess:function(e){e.isLogin=!0},loginFail:function(e){e.isLogin=!1}},actions:{loginSuccess:function(e){(0,e.commit)("loginSuccess")},loginFail:function(e){(0,e.commit)("loginFail")}}},user:N}}),H=n("//Fk"),W=n.n(H),k=n("mtWM"),A=n.n(k);A.a.defaults.timeout=3e3,A.a.defaults.withCredentials=!0,A.a.interceptors.request.use(function(e){e.headers={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"};var t=e.data;if(!t)return e;var n=F()(t);return e.data=encodeURI(n.map(function(e){return e+"="+t[e]}).join("&")),e},function(e){return W.a.reject(e)}),A.a.interceptors.response.use(function(e){var t=e.data;if(200===t.code)return e.data;Object(O.Message)({message:t.message,type:"error",duration:5e3})},function(e){return console.log("err:"+e),Object(O.Message)({message:e.message,type:"error",duration:5e3}),W.a.reject(e)});var V=A.a;s.default.config.productionTip=!1,s.default.use(S.a),s.default.prototype.$ajxj=V,new s.default({el:"#app",router:y,store:U,template:"<App/>",components:{App:_}})},WCWN:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2e7ed35e5ef65b69cc1d.js.map